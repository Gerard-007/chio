

// // Add an event listener to handle hover events on delete buttons
// document.addEventListener('mouseover', (event) => {
//     if (event.target.classList.contains('delete-button')) {
//         const deleteButton = event.target;
//         const galleryId = deleteButton.getAttribute('data-gallery-id');
//         console.log(`Hovering over delete button for gallery item with ID: ${galleryId}`);
//         // Hide the data-lg-id attribute of the parent gallery item
//         const galleryItem = deleteButton.closest('.gallery-item');
//         if (galleryItem) {
//             galleryItem.style.display = 'none';
//         }
//     }
// });

// // Add an event listener to handle mouseout events on delete buttons
// document.addEventListener('mouseout', (event) => {
//     if (event.target.classList.contains('delete-button')) {
//         const deleteButton = event.target;
//         const galleryId = deleteButton.getAttribute('data-gallery-id');
//         console.log(`Mouse left delete button for gallery item with ID: ${galleryId}`);
//         // Unhide the data-lg-id attribute of the parent gallery item
//         const galleryItem = deleteButton.closest('.gallery-item');
//         if (galleryItem) {
//             galleryItem.style.display = 'block';
//         }
//     }
// });

// // Add an event listener to handle tap events on mobile devices for delete buttons
// document.addEventListener('touchstart', (event) => {
//     if (event.target.classList.contains('delete-button')) {
//         const deleteButton = event.target;
//         const galleryId = deleteButton.getAttribute('data-gallery-id');
//         console.log(`Tapped on delete button for gallery item with ID: ${galleryId}`);
//         // Hide the data-lg-id attribute of the parent gallery item
//         const galleryItem = deleteButton.closest('.gallery-item');
//         if (galleryItem) {
//             galleryItem.style.display = 'none';
//         }
//     }
// });





// Listen for new gallery
<!-- socket.on('new-gallery', (gallery) => {
    // Get the gallery container element
    const galleryContainer = document.getElementById('animated-thumbnails-gallery');

    // Create a new div element for the gallery item
    const galleryItemDiv = document.createElement('div');
    galleryItemDiv.classList.add('col-md-3', 'mb-3', 'mt-3', 'gallery-item', 'position-relative'); // Added 'position-relative' class
    galleryItemDiv.setAttribute('data-lg-size', '1600-1067');
    galleryItemDiv.setAttribute('data-src', gallery.image);
    galleryItemDiv.setAttribute('data-sub-html', `<h4> Uploaded by ${gallery.by.full_name} </h4> <p> ${gallery.description} </p>`);

    // Create an img element for the gallery item
    const imgElement = document.createElement('img');
    imgElement.setAttribute('alt', gallery.by.full_name);
    imgElement.classList.add('w-100', 'h-100', 'border-radius-lg', 'bg-cover', 'img-responsive');
    imgElement.setAttribute('src', gallery.image);

    // Append the img element to the gallery item div
    galleryItemDiv.appendChild(imgElement);

    // Create the delete button
    const deleteButton = document.createElement('button');
    deleteButton.setAttribute('type', 'button');
    deleteButton.classList.add('btn', 'badge', 'bg-gradient-danger', 'text-white', 'px-2', 'btn-link', 'position-absolute', 'top-0', 'end-0', 'm-1'); // Added classes for positioning
    deleteButton.setAttribute('id', `delete-gallery-button-${gallery._id}`); // Unique ID for each delete button
    deleteButton.setAttribute('data-gallery-id', gallery._id); // Set data-gallery-id attribute
    deleteButton.innerHTML = '<i class="fa-solid fa-trash-can fa-lg"></i> Delete'; // Button text and icon

    // Append the delete button to the gallery item div
    galleryItemDiv.appendChild(deleteButton);

    // Append the gallery item div to the gallery container
    galleryContainer.prepend(galleryItemDiv);
}); -->




<!-- <div 
class="col-md-3 mb-3 mt-3 gallery-item" 
data-lg-size="1600-1067" 
data-src="https://res.cloudinary.com/geetechlab-com/image/upload/v1715651649/gallery_images/evhuvuim37qcn2gydgub.jpg" 
data-sub-html="<h4> Uploaded by undefined </h4> <p> null </p>">
    <img 
    alt="undefined" 
    class="w-100 h-100 border-radius-lg bg-cover img-responsive" 
    src="https://res.cloudinary.com/geetechlab-com/image/upload/v1715651649/gallery_images/evhuvuim37qcn2gydgub.jpg">
</div>







<div 
class="col-md-3 mb-3 mt-3 gallery-item" 
data-lg-size="1600-1067" 
data-src="https://res.cloudinary.com/geetechlab-com/image/upload/v1715651376/gallery_images/lm0kk5nthqnyaml46jis.jpg" 
data-sub-html="<h4> Uploaded by  </h4> <p>  </p>" 
data-lg-id="4db3e480-782b-4865-a4d0-5b486bcaf8df">
    <img 
    alt="664156c3cba6a84b3bfa2290" 
    class="w-100 h-100 border-radius-lg bg-cover img-responsive" 
    src="https://res.cloudinary.com/geetechlab-com/image/upload/v1715651376/gallery_images/lm0kk5nthqnyaml46jis.jpg">
</div> -->







<script>
    // Add an event listener to handle delete button clicks
    document.addEventListener('click', async (event) => {
        if (event.target.classList.contains('delete-btn')) {
            const galleryId = event.target.dataset.id;

            // Get the gallery item
            const galleryItem = event.target.closest('.gallery-item');

            // Remove the data-lg-id attribute
            galleryItem.removeAttribute('data-lg-id');

            try {
                // Send a DELETE request to your backend API
                const response = await axios.delete(`/gallery/${galleryId}`);
                if (response.status === 200) {
                    // Remove the gallery item from the DOM
                    galleryItem.remove();

                    // Emit a socket event to inform other clients about the deletion
                    socket.emit('delete-gallery', galleryId);
                }
            } catch (error) {
                console.error('Error deleting gallery:', error);
            }
        }
    });
</script>