

// // Add an event listener to handle hover events on delete buttons
// document.addEventListener('mouseover', (event) => {
//     if (event.target.classList.contains('delete-button')) {
//         const deleteButton = event.target;
//         const galleryId = deleteButton.getAttribute('data-gallery-id');
//         console.log(`Hovering over delete button for gallery item with ID: ${galleryId}`);
//         // Hide the data-lg-id attribute of the parent gallery item
//         const galleryItem = deleteButton.closest('.gallery-item');
//         if (galleryItem) {
//             galleryItem.style.display = 'none';
//         }
//     }
// });

// // Add an event listener to handle mouseout events on delete buttons
// document.addEventListener('mouseout', (event) => {
//     if (event.target.classList.contains('delete-button')) {
//         const deleteButton = event.target;
//         const galleryId = deleteButton.getAttribute('data-gallery-id');
//         console.log(`Mouse left delete button for gallery item with ID: ${galleryId}`);
//         // Unhide the data-lg-id attribute of the parent gallery item
//         const galleryItem = deleteButton.closest('.gallery-item');
//         if (galleryItem) {
//             galleryItem.style.display = 'block';
//         }
//     }
// });

// // Add an event listener to handle tap events on mobile devices for delete buttons
// document.addEventListener('touchstart', (event) => {
//     if (event.target.classList.contains('delete-button')) {
//         const deleteButton = event.target;
//         const galleryId = deleteButton.getAttribute('data-gallery-id');
//         console.log(`Tapped on delete button for gallery item with ID: ${galleryId}`);
//         // Hide the data-lg-id attribute of the parent gallery item
//         const galleryItem = deleteButton.closest('.gallery-item');
//         if (galleryItem) {
//             galleryItem.style.display = 'none';
//         }
//     }
// });





// Listen for new gallery
<!-- socket.on('new-gallery', (gallery) => {
    // Get the gallery container element
    const galleryContainer = document.getElementById('animated-thumbnails-gallery');

    // Create a new div element for the gallery item
    const galleryItemDiv = document.createElement('div');
    galleryItemDiv.classList.add('col-md-3', 'mb-3', 'mt-3', 'gallery-item', 'position-relative'); // Added 'position-relative' class
    galleryItemDiv.setAttribute('data-lg-size', '1600-1067');
    galleryItemDiv.setAttribute('data-src', gallery.image);
    galleryItemDiv.setAttribute('data-sub-html', `<h4> Uploaded by ${gallery.by.full_name} </h4> <p> ${gallery.description} </p>`);

    // Create an img element for the gallery item
    const imgElement = document.createElement('img');
    imgElement.setAttribute('alt', gallery.by.full_name);
    imgElement.classList.add('w-100', 'h-100', 'border-radius-lg', 'bg-cover', 'img-responsive');
    imgElement.setAttribute('src', gallery.image);

    // Append the img element to the gallery item div
    galleryItemDiv.appendChild(imgElement);

    // Create the delete button
    const deleteButton = document.createElement('button');
    deleteButton.setAttribute('type', 'button');
    deleteButton.classList.add('btn', 'badge', 'bg-gradient-danger', 'text-white', 'px-2', 'btn-link', 'position-absolute', 'top-0', 'end-0', 'm-1'); // Added classes for positioning
    deleteButton.setAttribute('id', `delete-gallery-button-${gallery._id}`); // Unique ID for each delete button
    deleteButton.setAttribute('data-gallery-id', gallery._id); // Set data-gallery-id attribute
    deleteButton.innerHTML = '<i class="fa-solid fa-trash-can fa-lg"></i> Delete'; // Button text and icon

    // Append the delete button to the gallery item div
    galleryItemDiv.appendChild(deleteButton);

    // Append the gallery item div to the gallery container
    galleryContainer.prepend(galleryItemDiv);
}); -->




<!-- <div 
class="col-md-3 mb-3 mt-3 gallery-item" 
data-lg-size="1600-1067" 
data-src="https://res.cloudinary.com/geetechlab-com/image/upload/v1715651649/gallery_images/evhuvuim37qcn2gydgub.jpg" 
data-sub-html="<h4> Uploaded by undefined </h4> <p> null </p>">
    <img 
    alt="undefined" 
    class="w-100 h-100 border-radius-lg bg-cover img-responsive" 
    src="https://res.cloudinary.com/geetechlab-com/image/upload/v1715651649/gallery_images/evhuvuim37qcn2gydgub.jpg">
</div>







<div 
class="col-md-3 mb-3 mt-3 gallery-item" 
data-lg-size="1600-1067" 
data-src="https://res.cloudinary.com/geetechlab-com/image/upload/v1715651376/gallery_images/lm0kk5nthqnyaml46jis.jpg" 
data-sub-html="<h4> Uploaded by  </h4> <p>  </p>" 
data-lg-id="4db3e480-782b-4865-a4d0-5b486bcaf8df">
    <img 
    alt="664156c3cba6a84b3bfa2290" 
    class="w-100 h-100 border-radius-lg bg-cover img-responsive" 
    src="https://res.cloudinary.com/geetechlab-com/image/upload/v1715651376/gallery_images/lm0kk5nthqnyaml46jis.jpg">
</div> -->







<!-- <script>
    // Add an event listener to handle delete button clicks
    document.addEventListener('click', async (event) => {
        if (event.target.classList.contains('delete-btn')) {
            const galleryId = event.target.dataset.id;

            // Get the gallery item
            const galleryItem = event.target.closest('.gallery-item');

            // Remove the data-lg-id attribute
            galleryItem.removeAttribute('data-lg-id');

            try {
                // Send a DELETE request to your backend API
                const response = await axios.delete(`/gallery/${galleryId}`);
                if (response.status === 200) {
                    // Remove the gallery item from the DOM
                    galleryItem.remove();

                    // Emit a socket event to inform other clients about the deletion
                    socket.emit('delete-gallery', galleryId);
                }
            } catch (error) {
                console.error('Error deleting gallery:', error);
            }
        }
    });
</script> -->








<div>
    <a href="#">
        <div class="position-relative">
            ${tribute.by && tribute.by.profile && tribute.by.profile.image ? 
                `<img class="avatar rounded-circle shadow" src="${tribute.by.profile.image}" alt="${tribute.by.full_name}">` :
                `<img class="avatar rounded-circle shadow" src="https://res.cloudinary.com/geetechlab-com/image/upload/v1583147406/nwaben.com/user_azjdde_sd2oje.jpg" alt="Default User">`}
        </div>
    </a>
</div>
<div class="ms-3">
    <div class="d-flex justify-content-between">
        <h6>
            ${tribute.by.full_name}
            <span class="text-muted text-xs tribute-timestamp">Â· ${formatDate(tribute.on)}</span>
        </h6>
        ${tribute.category === "candle" ? 
            '<img class="px-2" src="https://img.icons8.com/external-flaticons-lineal-color-flat-icons/48/000000/external-candles-pharmaceutical-flaticons-lineal-color-flat-icons-2.png"/>' :
            tribute.category === "flower" ? 
            '<img class="px-2" src="https://img.icons8.com/color/48/000000/bunch-flowers.png"/>' :
            '<img class="px-2" src="https://img.icons8.com/color/48/000000/scroll.png"/>'}
    </div>
    <p>${tribute.tribute_text}</p>
    <% if (isAuthenticated) { %>
        <div class="ms-auto text-start mb-3 mt-0">
            <% if (user.is_admin || tribute.by._id.toString() === user._id.toString()) { %>
                <button class="btn text-dark px-2 btn-link delete-tribute-button" id="delete-tribute-button" data-tribute-id="${tribute._id}" rel="tooltip" title="" data-original-title="Delete Tribute">
                    <i class="fa-solid fa-trash-can fa-lg" style="color: #ff1c1c;"></i> Delete
                </button>
            <% } %>
            <!-- <a href="#" class="btn text-danger px-2 btn-link">
                <i class="fas fa-heart"></i> 243
            </a> -->
        </div>
    <% } %>
</div>









// Listen for deleted tributes
socket.on('delete-tribute', tributeId => {
    // Handle the deletion on the frontend
    console.log(`Tribute with ID ${tributeId} has been deleted`);

    // Find the gallery element with the matching data-gallery-id attribute and remove it from the DOM
    const tributeElement = document.querySelector(`#tribute-item-${tributeId}`);
    console.log(`tributeElement: ${tributeElement}`)
    if (tributeElement) {
        tributeElement.remove();
        successToast("success", "Tribute deleted successfully")
    } else {
        console.log(`Tribute with ID ${tributeId} not found in the DOM`);
        errorToast("error", `Tribute with ID ${tributeId} not found`)
    }
});




socket.on('new-gallery', (gallery) => {
    const galleryContainer = document.getElementById('animated-thumbnails-gallery');
    const galleryItemDiv = document.createElement('div');
    galleryItemDiv.innerHTML = `
        <div class="col-md-3 mb-3 mt-3 gallery-item" data-lg-size="1600-1067" data-src="${gallery.image}" data-sub-html="<h4> Uploaded by ${gallery.by.full_name} </h4> <p> ${gallery.description} </p>">
            <div class="position-relative" style="height: 200px;"> <!-- Set a fixed height for the container -->
                <img alt="${gallery.by.full_name}" class="w-100 h-100 border-radius-lg bg-cover img-responsive" src="${gallery.image}"/>
                <div class="d-flex justify-content-between">
                    <button type="button" class="btn badge bg-gradient-info text-white px-2 btn-link position-absolute top-0 start-0 m-1" id="view-gallery-button" data-gallery-id="${gallery._id}">
                        <i class="fa-solid fa-eye fa-lg"></i>
                    </button>
                    <% if (isAuthenticated) { %>
                        <% if (user.is_admin || gallery.by._id.toString() === user._id.toString()) { %>
                            <button type="button" class="btn badge bg-gradient-danger text-white px-2 btn-link position-absolute top-0 end-0 m-1" id="delete-gallery-button" data-gallery-id="${gallery._id}">
                                <i class="fa-solid fa-trash-can fa-lg"></i>
                            </button>
                        <% } %>
                    <% } %>
                </div>
            </div>
        </div>
    `;
    galleryContainer.prepend(galleryItemDiv.firstChild);
});



// Listen for the 'delete-gallery' event from the server
socket.on('delete-gallery', (galleryId) => {
    // Handle the deletion on the frontend
    console.log(`Gallery with ID ${galleryId} has been deleted`);

    // Find the gallery element with the matching data-gallery-id attribute and remove it from the DOM
    const galleryElement = document.querySelector(`.gallery-item-${galleryId}`);
    console.log(`galleryElement: ${galleryElement}`)
    if (galleryElement) {
        galleryElement.remove();
        successToast("success", "Media deleted successfully")
    } else {
        console.log(`Gallery with ID ${galleryId} not found in the DOM`);
        errorToast("error", "Media deleted successfully")
    }
});



















<div class="col-md-3 mb-3 mt-3 gallery-item gallery-item-66451b67c2e0a710d707a17c" data-lg-size="1600-1067" data-src="https://res.cloudinary.com/geetechlab-com/image/upload/v1715805033/gallery_images/yqs3sf3aypfy3sk31hbe.jpg" data-sub-html="<h4> Uploaded by Geet CyberLab </h4> <p>  </p>">
    <div class="position-relative" style="height: 250px;"> <!-- Set a fixed height for the container -->
        <img alt="Geet CyberLab" class="w-100 h-100 border-radius-lg bg-cover img-responsive" src="https://res.cloudinary.com/geetechlab-com/image/upload/v1715805033/gallery_images/yqs3sf3aypfy3sk31hbe.jpg"/>
        <div class="d-flex justify-content-end">
            <button type="button" class="btn badge bg-gradient-danger text-white px-2 mx-3 btn-link position-absolute top-0 end-10 m-1" id="delete-gallery-button" data-gallery-id="66451b67c2e0a710d707a17c">
                <i class="fa-solid fa-trash-can fa-lg"></i>
            </button>
            <button type="button" class="btn badge bg-gradient-info text-white px-2 btn-link position-absolute top-0 end-0 m-1" id="view-gallery-button" data-gallery-id="66451b67c2e0a710d707a17c">
                <i class="fa-solid fa-eye fa-lg"></i>
            </button>
        </div>
    </div>
</div>